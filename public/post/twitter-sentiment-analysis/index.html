<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Twitter Sentiment Analysis: Part 1</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Data Science Portfilio">
  
  <meta name="author" content="Themefisher">
  <meta name="generator" content="Hugo 0.111.3">

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://nervous-wright-ea05a8.netlify.app/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://nervous-wright-ea05a8.netlify.app/plugins/themify-icons/themify-icons.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://nervous-wright-ea05a8.netlify.app/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://nervous-wright-ea05a8.netlify.app/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://nervous-wright-ea05a8.netlify.app/images/favicon.png " type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="fixed-top navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent">
      <a class="navbar-brand"href="https://nervous-wright-ea05a8.netlify.app/"><img class="img-fluid" src="/images/resume.png" alt="Kevin Bonds | Portfolio"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://nervous-wright-ea05a8.netlify.app/"> Home </a>
          </li>
          
            
            <li class="nav-item">
              <a class="nav-link" href="https://nervous-wright-ea05a8.netlify.app/resume">Resumé</a>
            </li>
            
          
            
            <li class="nav-item">
              <a class="nav-link" href="https://nervous-wright-ea05a8.netlify.app/contact">Contact</a>
            </li>
            
          
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/kwbonds?tab=repositories">Project Repos</a>
            </li>
            
          
        </ul>
        
        <!-- search -->
        <div class="search">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://nervous-wright-ea05a8.netlify.app//search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation --> <div class="py-5 d-none d-lg-block"></div> 

<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto block shadow mb-5">
        <h2>Twitter Sentiment Analysis: Part 1</h2>
        <div class="mb-3"><span>by <a href="/author/kevin-bonds">Kevin bonds</a></span>,
          <span>at 10 December 2019</span>, category :
          
          <a href="/categories/text-analysis">Text analysis</a>
          
          <a href="/categories/sentiment-analysis">Sentiment analysis</a>
          
          <a href="/categories/feature-engineering">Feature engineering</a>
          
        </div>
        
        <div class="content mb-5">
          <p>The following is an analysis of the <em>Twitter Sentiment Analysis Dataset</em> available at: <a href="http://thinknook.com/twitter-sentiment-analysis-training-corpus-dataset-2012-09-22/">http://thinknook.com/twitter-sentiment-analysis-training-corpus-dataset-2012-09-22/</a>. I will attempt to use this data to train a model to label unseen tweets into <strong>&ldquo;Positive&rdquo;</strong> or <strong>&ldquo;Negative&rdquo;</strong> sentiment. I will walk through my methodology and include code.</p>
<p>The following is an analysis of the <em>Twitter Sentiment Analysis Dataset</em> available at: <a href="http://thinknook.com/twitter-sentiment-analysis-training-corpus-dataset-2012-09-22/">http://thinknook.com/twitter-sentiment-analysis-training-corpus-dataset-2012-09-22/</a>. I will attempt to use this data to train a model to label unseen tweets into <strong>&ldquo;Positive&rdquo;</strong> or <strong>&ldquo;Negative&rdquo;</strong> sentiment. I will walk through my methodology and include code. The github repo for my work can be found here: <a href="https://github.com/kwbonds/TwitterSentimentAnalysis">https://github.com/kwbonds/TwitterSentimentAnalysis</a>. ^[The file is &gt; 50 MB, so I have taken a stratified sample and loaded it for this example (mainly so that this website will load). If you want to begin with the original, you will need to download it from the source above and read it into your working directory as an object named <em>raw_tweets</em>.]</p>
<h3 id="libraries-used">Libraries Used</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tidyverse)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(readr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(caret)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(knitr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(quanteda)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(doSNOW)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(gridExtra)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(quanteda.textplots)
</span></span></code></pre></div><h4 id="load-data-from-zip-file">Load Data from .zip file</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>raw_tweets <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../raw_tweets.rds&#34;</span>)
</span></span></code></pre></div><h4 id="the-data">The Data</h4>
<p>Take a quick look at what we have.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Examine the structure of the raw_tweets dataframe</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">str</span>(raw_tweets)
</span></span></code></pre></div><pre tabindex="0"><code>## tibble [78,931 × 4] (S3: tbl_df/tbl/data.frame)
##  $ ItemID         : num [1:78931] 8 9 18 26 35 89 129 141 161 204 ...
##  $ Sentiment      : num [1:78931] 0 1 1 0 0 0 1 0 0 1 ...
##  $ SentimentSource: chr [1:78931] &#34;Sentiment140&#34; &#34;Sentiment140&#34; &#34;Sentiment140&#34; &#34;Sentiment140&#34; ...
##  $ SentimentText  : chr [1:78931] &#34;Sunny Again        Work Tomorrow  :-|       TV Tonight&#34; &#34;handed in my uniform today . i miss you already&#34; &#34;Feeling strangely fine. Now I&#39;m gonna go listen to some Semisonic to celebrate&#34; &#34;BoRinG   ): whats wrong with him??     Please tell me........   :-/&#34; ...
##  - attr(*, &#34;problems&#34;)= tibble [27 × 5] (S3: tbl_df/tbl/data.frame)
##   ..$ row     : int [1:27] 4285 4285 4286 4286 4287 4287 4287 4287 4287 4287 ...
##   ..$ col     : chr [1:27] &#34;SentimentText&#34; &#34;SentimentText&#34; &#34;SentimentText&#34; &#34;SentimentText&#34; ...
##   ..$ expected: chr [1:27] &#34;delimiter or quote&#34; &#34;delimiter or quote&#34; &#34;delimiter or quote&#34; &#34;delimiter or quote&#34; ...
##   ..$ actual  : chr [1:27] &#34; &#34; &#34; &#34; &#34; &#34; &#34; &#34; ...
##   ..$ file    : chr [1:27] &#34;&#39;./Sentiment Analysis Dataset.csv&#39;&#34; &#34;&#39;./Sentiment Analysis Dataset.csv&#39;&#34; &#34;&#39;./Sentiment Analysis Dataset.csv&#39;&#34; &#34;&#39;./Sentiment Analysis Dataset.csv&#39;&#34; ...
</code></pre><table>
<thead>
<tr>
<th style="text-align:right">ItemID</th>
<th style="text-align:right">Sentiment</th>
<th style="text-align:left">SentimentSource</th>
<th style="text-align:left">SentimentText</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:right">0</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">Sunny Again        Work Tomorrow  :-|       TV Tonight</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:right">1</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">handed in my uniform today . i miss you already</td>
</tr>
<tr>
<td style="text-align:right">18</td>
<td style="text-align:right">1</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">Feeling strangely fine. Now I&rsquo;m gonna go listen to some Semisonic to celebrate</td>
</tr>
<tr>
<td style="text-align:right">26</td>
<td style="text-align:right">0</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">BoRinG   ): whats wrong with him??     Please tell me&hellip;&hellip;..   :-/</td>
</tr>
<tr>
<td style="text-align:right">35</td>
<td style="text-align:right">0</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">No Sat off&hellip;Need to work 6 days a week</td>
</tr>
<tr>
<td style="text-align:right">89</td>
<td style="text-align:right">0</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">In case I feel emo in camp (feeling a wee bit of it alr)&hellip;am bringing in the Human Rights Watch World Report 2009..hope it&rsquo;ll work</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Convert Sentiment from num to factor and change levels</span>
</span></span><span style="display:flex;"><span>raw_tweets<span style="color:#f92672">$</span>Sentiment <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.factor</span>(raw_tweets<span style="color:#f92672">$</span>Sentiment)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">levels</span>(raw_tweets<span style="color:#f92672">$</span>Sentiment) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Negative&#34;</span>, <span style="color:#e6db74">&#34;Positive&#34;</span>)
</span></span><span style="display:flex;"><span>raw_tweets<span style="color:#f92672">$</span>SentimentSource <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.factor</span>(raw_tweets<span style="color:#f92672">$</span>SentimentSource)
</span></span></code></pre></div><p>So we have 78,931 rows. Even though tweets are somewhat short, this is a lot of data. Tokenization would create too many features, to be handled efficiently, if we were to try to use this much data. Therefore, we should train and train on about 5% of these data&ndash;and validate on some of the rest later. We will make sure to maintain the proportionality along the way. Let&rsquo;s see what that is.</p>
<p>What proportion of &ldquo;Sentiment&rdquo; do we have in our corpus?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get the proportion of Sentiment in the corpus</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">prop.table</span>(<span style="color:#a6e22e">table</span>(raw_tweets[, <span style="color:#e6db74">&#34;Sentiment&#34;</span>]))
</span></span></code></pre></div><pre tabindex="0"><code>## Sentiment
##  Negative  Positive 
## 0.4977005 0.5022995
</code></pre><p>Looks like almost 50/50. Nice. In this case a random sample would probably give us very similar proportions, we will use techniques to hard maintain this proportion i.e. just as if we had an unbalanced data set.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get the proportion of the SentimentSource</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">prop.table</span>(<span style="color:#a6e22e">table</span>(raw_tweets[, <span style="color:#e6db74">&#34;SentimentSource&#34;</span>]))
</span></span></code></pre></div><pre tabindex="0"><code>## SentimentSource
##       Kaggle Sentiment140 
##  0.001026213  0.998973787
</code></pre><p>I&rsquo;m not sure what this <em>SentimentSource</em> column is, but it looks like the vast majority is &ldquo;Sentiment140&rdquo;. We&rsquo;ll ignore it for now.</p>
<h3 id="count-features">Count Features</h3>
<p>Let&rsquo;s add some features based on counts of how many hash-tags, web-links, and @refs are in each tweet.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Count how many http links are in the tweet</span>
</span></span><span style="display:flex;"><span>raw_tweets<span style="color:#f92672">$</span>web_count <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_count</span>(raw_tweets<span style="color:#f92672">$</span>SentimentText, 
</span></span><span style="display:flex;"><span>                                  <span style="color:#e6db74">&#34;http:/*[A-z+/+.+0-9]*&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Count haw many hashtags are in the tweet</span>
</span></span><span style="display:flex;"><span>raw_tweets<span style="color:#f92672">$</span>hashtag_count <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_count</span>(raw_tweets<span style="color:#f92672">$</span>SentimentText, 
</span></span><span style="display:flex;"><span>                                      <span style="color:#e6db74">&#34;#[A-z+0-9]*&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Count how many @reply tags are in the tweet</span>
</span></span><span style="display:flex;"><span>raw_tweets<span style="color:#f92672">$</span>at_ref_count <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_count</span>(raw_tweets<span style="color:#f92672">$</span>SentimentText, 
</span></span><span style="display:flex;"><span>                                     <span style="color:#e6db74">&#34;@[A-z+0-9]*&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Count the number of characters in the tweet</span>
</span></span><span style="display:flex;"><span>raw_tweets<span style="color:#f92672">$</span>text_length <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">nchar</span>(raw_tweets<span style="color:#f92672">$</span>SentimentText)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># View the first few rows </span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kable</span>(<span style="color:#a6e22e">head</span>(raw_tweets))
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:right">ItemID</th>
<th style="text-align:left">Sentiment</th>
<th style="text-align:left">SentimentSource</th>
<th style="text-align:left">SentimentText</th>
<th style="text-align:right">web_count</th>
<th style="text-align:right">hashtag_count</th>
<th style="text-align:right">at_ref_count</th>
<th style="text-align:right">text_length</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">Negative</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">Sunny Again        Work Tomorrow  :-|       TV Tonight</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">54</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:left">Positive</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">handed in my uniform today . i miss you already</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">47</td>
</tr>
<tr>
<td style="text-align:right">18</td>
<td style="text-align:left">Positive</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">Feeling strangely fine. Now I&rsquo;m gonna go listen to some Semisonic to celebrate</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">78</td>
</tr>
<tr>
<td style="text-align:right">26</td>
<td style="text-align:left">Negative</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">BoRinG   ): whats wrong with him??     Please tell me&hellip;&hellip;..   :-/</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">67</td>
</tr>
<tr>
<td style="text-align:right">35</td>
<td style="text-align:left">Negative</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">No Sat off&hellip;Need to work 6 days a week</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">39</td>
</tr>
<tr>
<td style="text-align:right">89</td>
<td style="text-align:left">Negative</td>
<td style="text-align:left">Sentiment140</td>
<td style="text-align:left">In case I feel emo in camp (feeling a wee bit of it alr)&hellip;am bringing in the Human Rights Watch World Report 2009..hope it&rsquo;ll work</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">131</td>
</tr>
</tbody>
</table>
<h3 id="some-manual-work">Some Manual Work</h3>
<p>One thing to note: looking into the data it appears that there is a problem with the csv. There is a text_length greater than the maximum text length twitter allows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># get the max character length in the corpus</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">max</span>(raw_tweets<span style="color:#f92672">$</span>text_length)
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 1045
</code></pre><p>Upon manual inspection we can see that several texts are getting crammed into the column of one&ndash;resulting in a very long string not properly parsed.</p>
<p>How many do we have that are over the 280 character limit?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Count of the tweets that are over the character limit</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">count</span>(raw_tweets<span style="color:#a6e22e">[which</span>(raw_tweets<span style="color:#f92672">$</span>text_length <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">280</span>),])<span style="color:#f92672">$</span>n
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 4
</code></pre><p>Looking at these we see a few more examples like above, but also see a bunch or garbage text (i.e. special characters). We&rsquo;ll remove special characters later. This will take care of this by proxy. Also, we&rsquo;ll remove incomplete cases (after cleaning) in case we are left with only empty strings.</p>
<p>For now let&rsquo;s just remove all tweets that are over the limit. We have an abundance of data so it&rsquo;s ok to remove some noise. And check to make sure they are gone.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Remove any tweets that are over 280 character counts</span>
</span></span><span style="display:flex;"><span>raw_tweets <span style="color:#f92672">&lt;-</span> raw_tweets[<span style="color:#f92672">-</span><span style="color:#a6e22e">which</span>(raw_tweets<span style="color:#f92672">$</span>text_length <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">280</span>),]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check that they have been removed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">count</span>(raw_tweets<span style="color:#a6e22e">[which</span>(raw_tweets<span style="color:#f92672">$</span>text_length <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">280</span>),])<span style="color:#f92672">$</span>n
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 0
</code></pre><p>Also, I did notice that many of the problem tweets above came from the &ldquo;Kaggle&rdquo; source. Kaggle is a Data Science competition platform. It is a great resource for competition and learning. My theory is that this data was used and enriched during a Kaggle competition. It seems disproportionate that several of the problem tweets were from this source. Let&rsquo;s remove them all.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Count of &#34;Kaggle&#34; records</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">count</span>(raw_tweets<span style="color:#a6e22e">[which</span>(raw_tweets<span style="color:#f92672">$</span>SentimentSource <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Kaggle&#34;</span>),])<span style="color:#f92672">$</span>n
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 80
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Remove the &#34;Kaggle&#34; treets</span>
</span></span><span style="display:flex;"><span>raw_tweets <span style="color:#f92672">&lt;-</span> raw_tweets[<span style="color:#f92672">-</span><span style="color:#a6e22e">which</span>(raw_tweets<span style="color:#f92672">$</span>SentimentSource <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Kaggle&#34;</span>),]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check that they have been removed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">count</span>(raw_tweets<span style="color:#a6e22e">[which</span>(raw_tweets<span style="color:#f92672">$</span>SentimentSource <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Kaggle&#34;</span>),])<span style="color:#f92672">$</span>n
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 0
</code></pre><h3 id="visualize-distributions-of-engineered-features">Visualize Distributions of Engineered Features</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Create 3 plots and display side-by-side</span>
</span></span><span style="display:flex;"><span>plot1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(raw_tweets,<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> text_length, 
</span></span><span style="display:flex;"><span>                               fill <span style="color:#f92672">=</span> Sentiment)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">geom_histogram</span>(binwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, 
</span></span><span style="display:flex;"><span>                       position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>, 
</span></span><span style="display:flex;"><span>                       alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xlim</span>(<span style="color:#ae81ff">-1</span>,<span style="color:#ae81ff">140</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Text Count&#34;</span>, 
</span></span><span style="display:flex;"><span>             x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Length of Text&#34;</span>,
</span></span><span style="display:flex;"><span>             title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Distribution of Text Lengths&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plot2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(raw_tweets,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> at_ref_count, 
</span></span><span style="display:flex;"><span>                    fill <span style="color:#f92672">=</span> Sentiment)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">geom_histogram</span>(binwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, 
</span></span><span style="display:flex;"><span>                       position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>, 
</span></span><span style="display:flex;"><span>                       alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xlim</span>(<span style="color:#ae81ff">-1</span>,<span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Text Count&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of @ref&#34;</span>,
</span></span><span style="display:flex;"><span>             title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Distribution of @ref&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plot3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(raw_tweets, 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> hashtag_count, 
</span></span><span style="display:flex;"><span>                    fill <span style="color:#f92672">=</span> Sentiment)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">geom_histogram</span>(binwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, 
</span></span><span style="display:flex;"><span>                       position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>, 
</span></span><span style="display:flex;"><span>                       alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xlim</span>(<span style="color:#ae81ff">-1</span>,<span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Text Count&#34;</span>, 
</span></span><span style="display:flex;"><span>             x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of Hashtags&#34;</span>,
</span></span><span style="display:flex;"><span>             title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Distribution of Hashtags&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plot4 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(raw_tweets, 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> web_count, 
</span></span><span style="display:flex;"><span>                    fill <span style="color:#f92672">=</span> Sentiment)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">geom_histogram</span>(binwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, 
</span></span><span style="display:flex;"><span>                       position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>,
</span></span><span style="display:flex;"><span>                       alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xlim</span>(<span style="color:#ae81ff">-1</span>,<span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Text Count&#34;</span>, 
</span></span><span style="display:flex;"><span>             x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Count of Weblinks&#34;</span>,
</span></span><span style="display:flex;"><span>             title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Distribution of Weblinks&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">grid.arrange</span>(plot1, plot2, plot3, plot4, nrow<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, ncol<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-twitter-sentiment-analysis_files/figure-html/grid_plot-1.png" width="576" />
<p>Doesn&rsquo;t look like any of the features we engineered suggest much predictive value. We&rsquo;ll have to rely on tokenizing the text to get our features&ndash;unless we can come up with other ideas. We can start with simple tokenozation (i.e. &ldquo;Bag of Words&rdquo;) and also try some N-grams. Simple Bag of Words tokenization does not preserve the word order or association, but N-grams will cause our feature space to explode and is typically very sparse. This will require some dimensionality reduction&ndash;which will certainly add complexity and is a &ldquo;black-box&rdquo;&quot; method. i.e we lose the ability to inspect or explain the model.</p>
<p>Let&rsquo;s start creating our test/train set and start modeling.</p>
<h3 id="stratified-sampling">Stratified Sampling</h3>
<p>Let&rsquo;s create a data partition. First we&rsquo;ll take 10% of the 78,847 tweets to build our model. We&rsquo;ll further split this into test and train data sets. We&rsquo;ll preserve the indexes so we can further partition later if necessary.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Set seed for randomizer</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">42</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Retrieve indexes for partitioning</span>
</span></span><span style="display:flex;"><span>partition_1_indexes <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">createDataPartition</span>(raw_tweets<span style="color:#f92672">$</span>Sentiment, 
</span></span><span style="display:flex;"><span>                                           times <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.10</span>, list <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create dataframe</span>
</span></span><span style="display:flex;"><span>train_validate <span style="color:#f92672">&lt;-</span> raw_tweets[partition_1_indexes, <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">7</span>)]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reset seed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">42</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Retrieve indexes for train and test partition</span>
</span></span><span style="display:flex;"><span>train_indexes <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">createDataPartition</span>(train_validate<span style="color:#f92672">$</span>Sentiment, 
</span></span><span style="display:flex;"><span>                                     times <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.60</span>, list <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use the indexes to create the train and test dataframes</span>
</span></span><span style="display:flex;"><span>train <span style="color:#f92672">&lt;-</span> train_validate[train_indexes, ]
</span></span><span style="display:flex;"><span>test <span style="color:#f92672">&lt;-</span> train_validate[<span style="color:#f92672">-</span>train_indexes, ]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Return the number of records in the training set</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">nrow</span>(train)
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 4732
</code></pre><p>So, now we have 4,732 tweets. Check proportions just to be safe.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Check proportion is same as original table</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">prop.table</span>(<span style="color:#a6e22e">table</span>(train<span style="color:#f92672">$</span>Sentiment))
</span></span></code></pre></div><pre tabindex="0"><code>## 
##  Negative  Positive 
## 0.4976754 0.5023246
</code></pre><p>And we have almost exactly the same proportions as our original, much larger, data set.</p>
<h3 id="tokenization">Tokenization</h3>
<p>Let&rsquo;s now tokenize our text data. This is the first step in turning raw text into features. We want the individual words to become features. We&rsquo;ll cleanup some things, engineer some features, and maybe create some combinations of words a little later.</p>
<p>There are lots of decisions to be made when doing this sort of text analysis. Do we want our features to contain punctuation, hyphenated words, etc.? Typically in text analysis, special characters, punctuation, and numbers are removed because they don&rsquo;t tend to contain much information to retrieve. However, since this is Twitter data, our corpus does contain some emoticons 😂 that are represented as special characters (ex: &ldquo;:-)&rdquo;, &ldquo;:-/&rdquo; ). If we remove them we will lose the textual representations of emotion. But, in looking closely at the data, these emoticons are surprisingly not very prevalent. So let&rsquo;s just remove them.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Convert SentimentText column to tokens</span>
</span></span><span style="display:flex;"><span>train_tokens <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tokens</span>(train<span style="color:#f92672">$</span>SentimentText, 
</span></span><span style="display:flex;"><span>                       what <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;word&#34;</span>, 
</span></span><span style="display:flex;"><span>                       remove_numbers <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, 
</span></span><span style="display:flex;"><span>                       remove_punct <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, 
</span></span><span style="display:flex;"><span>                       remove_twitter <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                       remove_symbols <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, 
</span></span><span style="display:flex;"><span>                       remove_hyphens <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span></code></pre></div><pre tabindex="0"><code>## Warning: remove_twitter, remove_hyphens arguments are not used.
</code></pre><p>Let&rsquo;s look at a few to illustrate what we did.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Inspect tweets tokens</span>
</span></span><span style="display:flex;"><span>train_tokens[[29]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;quot&#34;    &#34;she&#34;     &#34;has&#34;     &#34;a&#34;       &#34;great&#34;   &#34;smile&#34;   &#34;quot&#34;   
##  [8] &#34;Thank&#34;   &#34;you&#34;     &#34;I&#34;       &#34;GOT&#34;     &#34;that&#34;    &#34;comment&#34; &#34;from&#34;   
## [15] &#34;DEMI&#34;    &#34;quot&#34;    &#34;S&#34;       &#34;single&#34;  &#34;la&#34;      &#34;la&#34;      &#34;land&#34;   
## [22] &#34;music&#34;   &#34;video&#34;   &#34;haha&#34;    &#34;she&#34;     &#34;really&#34;  &#34;has&#34;     &#34;a&#34;      
## [29] &#34;good&#34;    &#34;SMILE&#34;
</code></pre><p>These are the tokens, from the 29th record, of the training data set. i.e. the tweet below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>train[29,<span style="color:#ae81ff">2</span>]
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 1 × 1
##   SentimentText                                                                 
##   &lt;chr&gt;                                                                         
## 1 &amp;quot; she has a great smile   &amp;quot; Thank you! I GOT that comment from DEMI…
</code></pre><p>Also this one has some Uppercase, special characters, and stop words:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>train_tokens[[30]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;Wasn&#39;t&#34;  &#34;allowed&#34; &#34;on&#34;      &#34;the&#34;     &#34;drums&#34;   &#34;stuck&#34;   &#34;on&#34;     
##  [8] &#34;the&#34;     &#34;bass&#34;    &#34;instead&#34; &#34;I&#39;m&#34;     &#34;no&#34;      &#34;Jack&#34;    &#34;Bruce&#34;  
## [15] &#34;but&#34;     &#34;still&#34;   &#34;blew&#34;    &#34;my&#34;      &#34;other&#34;   &#34;band&#34;    &#34;members&#34;
## [22] &#34;away&#34;    &#34;Natch&#34;
</code></pre><p>Let&rsquo;s change all Uppercase to lower to reduce the possible combinations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Convert to lower-case</span>
</span></span><span style="display:flex;"><span>train_tokens <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tokens_tolower</span>(train_tokens)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check same tokens as before</span>
</span></span><span style="display:flex;"><span>train_tokens[[29]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;quot&#34;    &#34;she&#34;     &#34;has&#34;     &#34;a&#34;       &#34;great&#34;   &#34;smile&#34;   &#34;quot&#34;   
##  [8] &#34;thank&#34;   &#34;you&#34;     &#34;i&#34;       &#34;got&#34;     &#34;that&#34;    &#34;comment&#34; &#34;from&#34;   
## [15] &#34;demi&#34;    &#34;quot&#34;    &#34;s&#34;       &#34;single&#34;  &#34;la&#34;      &#34;la&#34;      &#34;land&#34;   
## [22] &#34;music&#34;   &#34;video&#34;   &#34;haha&#34;    &#34;she&#34;     &#34;really&#34;  &#34;has&#34;     &#34;a&#34;      
## [29] &#34;good&#34;    &#34;smile&#34;
</code></pre><h3 id="remove-stopwords">Remove Stopwords</h3>
<p>Let&rsquo;s remove stopwords using the quanteda packages built in <em>stopwords()</em> function and look at record 26 again.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Remove stopwords</span>
</span></span><span style="display:flex;"><span>train_tokens <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tokens_select</span>(train_tokens, 
</span></span><span style="display:flex;"><span>                              <span style="color:#a6e22e">stopwords</span>(), 
</span></span><span style="display:flex;"><span>                              selection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;remove&#34;</span>)
</span></span><span style="display:flex;"><span>train_tokens[[29]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;quot&#34;    &#34;great&#34;   &#34;smile&#34;   &#34;quot&#34;    &#34;thank&#34;   &#34;got&#34;     &#34;comment&#34;
##  [8] &#34;demi&#34;    &#34;quot&#34;    &#34;s&#34;       &#34;single&#34;  &#34;la&#34;      &#34;la&#34;      &#34;land&#34;   
## [15] &#34;music&#34;   &#34;video&#34;   &#34;haha&#34;    &#34;really&#34;  &#34;good&#34;    &#34;smile&#34;
</code></pre><p>And record 29 again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>train_tokens[[30]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;allowed&#34; &#34;drums&#34;   &#34;stuck&#34;   &#34;bass&#34;    &#34;instead&#34; &#34;jack&#34;    &#34;bruce&#34;  
##  [8] &#34;still&#34;   &#34;blew&#34;    &#34;band&#34;    &#34;members&#34; &#34;away&#34;    &#34;natch&#34;
</code></pre><h3 id="stemming">Stemming</h3>
<p>Next, we need to stem the tokens. Stemming is a method of getting to the word root. This way, we won&rsquo;t have multiple versions of the same root word. We can illustrate below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Stem tokens</span>
</span></span><span style="display:flex;"><span>train_tokens <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tokens_wordstem</span>(train_tokens, 
</span></span><span style="display:flex;"><span>                                language <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;english&#34;</span>)
</span></span><span style="display:flex;"><span>train_tokens[[29]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;quot&#34;    &#34;great&#34;   &#34;smile&#34;   &#34;quot&#34;    &#34;thank&#34;   &#34;got&#34;     &#34;comment&#34;
##  [8] &#34;demi&#34;    &#34;quot&#34;    &#34;s&#34;       &#34;singl&#34;   &#34;la&#34;      &#34;la&#34;      &#34;land&#34;   
## [15] &#34;music&#34;   &#34;video&#34;   &#34;haha&#34;    &#34;realli&#34;  &#34;good&#34;    &#34;smile&#34;
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>train_tokens[[30]]
</span></span></code></pre></div><pre tabindex="0"><code>##  [1] &#34;allow&#34;   &#34;drum&#34;    &#34;stuck&#34;   &#34;bass&#34;    &#34;instead&#34; &#34;jack&#34;    &#34;bruce&#34;  
##  [8] &#34;still&#34;   &#34;blew&#34;    &#34;band&#34;    &#34;member&#34;  &#34;away&#34;    &#34;natch&#34;
</code></pre><p>You can see that &ldquo;allowed&rdquo; becomes &ldquo;allow&rdquo;, and &ldquo;drums&rdquo; becomes &ldquo;drum&rdquo;, etc.</p>
<h3 id="create-a-document-feature-matrix">Create a Document-Feature Matrix</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Create a DFM</span>
</span></span><span style="display:flex;"><span>train_dfm <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">dfm</span>(train_tokens, 
</span></span><span style="display:flex;"><span>                 tolower <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span></code></pre></div><p>Let&rsquo;s take a quick look at a wordcloud of what is in the dfm.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Create wordcloud</span>
</span></span><span style="display:flex;"><span>train_dfm <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">textplot_wordcloud</span>()
</span></span></code></pre></div><img src="/post/2019-12-10-twitter-sentiment-analysis_files/figure-html/wordcloud-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Convert to matrix</span>
</span></span><span style="display:flex;"><span>train_dfm <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.matrix</span>(train_dfm)
</span></span></code></pre></div><p>We now have a matrix&ndash;the length of our original data frame&ndash;now with 9546 features in the term. That is a lot of features. We are definitely suffering from the &ldquo;curse of dimensionality&rdquo;. We&rsquo;ll need to do some feature reduction at some point.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Check dimensions of the DFM</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dim</span>(train_dfm)
</span></span></code></pre></div><pre tabindex="0"><code>## [1] 4732 9546
</code></pre><p>Let&rsquo;s look at the first 6 documents (as rows) and the first 20 features of the term (as columns).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># View part of the matrix</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kable</span>(<span style="color:#a6e22e">head</span>(train_dfm[1<span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>]))
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:right">case</th>
<th style="text-align:right">feel</th>
<th style="text-align:right">emo</th>
<th style="text-align:right">camp</th>
<th style="text-align:right">wee</th>
<th style="text-align:right">bit</th>
<th style="text-align:right">alr</th>
<th style="text-align:right">bring</th>
<th style="text-align:right">human</th>
<th style="text-align:right">right</th>
<th style="text-align:right">watch</th>
<th style="text-align:right">world</th>
<th style="text-align:right">report</th>
<th style="text-align:right">hope</th>
<th style="text-align:right">it&rsquo;ll</th>
<th style="text-align:right">work</th>
<th style="text-align:right">think</th>
<th style="text-align:right">felt</th>
<th style="text-align:right">realli</th>
<th style="text-align:right">sick</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">text1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text2</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:left">text3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text4</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text6</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<p>Now we have a nice DFM. The columns are the features, and the column-space is the term. The rows are the documents and the row-space are the corpus.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Bind the DFM, Sentiment together as a dataframe</span>
</span></span><span style="display:flex;"><span>train_df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">cbind</span>(<span style="color:#e6db74">&#34;Sentiment&#34;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(train<span style="color:#f92672">$</span>Sentiment), 
</span></span><span style="display:flex;"><span>                  <span style="color:#a6e22e">as.data.frame</span>(train_dfm))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kable</span>(train_df[5<span style="color:#f92672">:</span><span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">35</span><span style="color:#f92672">:</span><span style="color:#ae81ff">50</span>])
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:right">eurgh</th>
<th style="text-align:right">silli</th>
<th style="text-align:right">cold</th>
<th style="text-align:right">tire</th>
<th style="text-align:right">need</th>
<th style="text-align:right">stuff</th>
<th style="text-align:right">back</th>
<th style="text-align:right">gov&rsquo;t</th>
<th style="text-align:right">motor</th>
<th style="text-align:right">just</th>
<th style="text-align:right">peed</th>
<th style="text-align:right">littl</th>
<th style="text-align:right"><a href="http://bit.ly/aldxf">http://bit.ly/aldxf</a></th>
<th style="text-align:right">via</th>
<th style="text-align:right">@ttac</th>
<th style="text-align:right">amp</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">text5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text6</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text7</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:left">text8</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text9</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text10</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text11</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text12</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text13</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text14</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:left">text15</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
</tbody>
</table>
<p>Unfortunately, R cannot handle some of these tokens as columns in a data frame. The names cannot begin with an integer or a special character for example. We can use the <code>make.names()</code> function, to insure we don&rsquo;t have any invalid names.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Alter any names that don&#39;t work as columns</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(train_df) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">make.names</span>(<span style="color:#a6e22e">names</span>(train_df), 
</span></span><span style="display:flex;"><span>                              unique <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span></code></pre></div><h3 id="setting-up-for-k-fold-cross-validation">Setting up for K-fold Cross Validation</h3>
<p>We will set up a control plan for 30 models. We should be able to use this plan for all our subsequent modeling.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Set seed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">42</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define indexes for the training control </span>
</span></span><span style="display:flex;"><span>cv_folds <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">createMultiFolds</span>(train<span style="color:#f92672">$</span>Sentiment, 
</span></span><span style="display:flex;"><span>                             k <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, times <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Build training control object</span>
</span></span><span style="display:flex;"><span>cv_cntrl <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">trainControl</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;repeatedcv&#34;</span>, 
</span></span><span style="display:flex;"><span>                         number <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>                         repeats <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, 
</span></span><span style="display:flex;"><span>                         index <span style="color:#f92672">=</span> cv_folds)
</span></span></code></pre></div><h3 id="train-the-first-model">Train the First Model</h3>
<p>Let&rsquo;s train the first model to see what kind of accuracy we have. Let&rsquo;s use a single decision tree algorithm. This algorithm will, however, create 30 * 7 or 210 models. ^[Note: I am loading a pre-processed model. Training the model takes a long time. If you wishd to run the model yourself, you will have to modify the code below. You&rsquo;ll need to remove the <code>eval=FALSE</code> on the next to sections and add <code>eval=FALSE</code> to the <code>load(&quot;../../rpart1.rds&quot;)</code> section.]</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Train a decision tree model using </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the training control we setup</span>
</span></span><span style="display:flex;"><span> rpart1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">train</span>(Sentiment <span style="color:#f92672">~</span> ., 
</span></span><span style="display:flex;"><span>                 data <span style="color:#f92672">=</span> train_df, 
</span></span><span style="display:flex;"><span>                 method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;rpart&#34;</span>, 
</span></span><span style="display:flex;"><span>                 trControl <span style="color:#f92672">=</span> cv_cntrl, 
</span></span><span style="display:flex;"><span>                 tuneLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Inspect the model output</span>
</span></span><span style="display:flex;"><span>rpart1
</span></span></code></pre></div><pre tabindex="0"><code>## CART 
## 
## 4732 samples
## 9157 predictors
##    2 classes: &#39;Negative&#39;, &#39;Positive&#39; 
## 
## No pre-processing
## Resampling: Cross-Validated (10 fold, repeated 3 times) 
## Summary of sample sizes: 4258, 4258, 4259, 4259, 4259, 4260, ... 
## Resampling results across tuning parameters:
## 
##   cp            Accuracy   Kappa     
##   0.0004246285  0.6254591  0.24905423
##   0.0012738854  0.6288400  0.25581092
##   0.0014437367  0.6289804  0.25608746
##   0.0076433121  0.5839126  0.16641297
##   0.0162774239  0.5546603  0.10857242
##   0.0184713376  0.5383143  0.07756101
##   0.0441613588  0.5101443  0.01978729
## 
## Accuracy was used to select the optimal model using the largest value.
## The final value used for the model was cp = 0.001443737.
</code></pre><p>Outputting the model results we see that we have an accuracy 62.9% accuracy already. That isn&rsquo;t bad. Really we want to get to about 90% if we can. This is already better than a coin flip and we haven&rsquo;t even begun. Let&rsquo;s take some steps to improve things.</p>
<h4 id="to-be-continued">To be continued&hellip;</h4>
        </div>
      </div>
      <div class="col-lg-8 mx-auto block shadow">
        
        
      </div>
    </div>
  </div>
</section>


<footer class="py-4 bg-light border-top">
  <div class="container">
    <div class="row justify-content-between align-items-center">
      <div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0">
        <a href="https://nervous-wright-ea05a8.netlify.app/"><img src="/images/resume.png" class="img-fluid"
            alt="Kevin Bonds | Portfolio"></a>
      </div>
      <div class="col-lg-4 text-center mb-4 mb-lg-0">
        <ul class="list-inline mb-0">
          
          <li class="list-inline-item"><a class="text-dark d-block p-2" href="https://nervous-wright-ea05a8.netlify.app/resume">Resumé</a>
          </li>
          
          <li class="list-inline-item"><a class="text-dark d-block p-2" href="https://nervous-wright-ea05a8.netlify.app/contact">Contact</a>
          </li>
          
          <li class="list-inline-item"><a class="text-dark d-block p-2" href="https://github.com/kwbonds?tab=repositories">Project Repos</a>
          </li>
          
        </ul>
      </div>
      <div class="col-lg-4 text-lg-right text-center mb-4 mb-lg-0">
        <ul class="list-inline social-icon mb-0">
          
          <li class="list-inline-item"><a href="https://join.skype.com/invite/u45PzQhKsLp5"><i class="ti-skype"></i></a></li>
          
          <li class="list-inline-item"><a href="https://twitter.com/KevinWBonds"><i class="ti-twitter-alt"></i></a></li>
          
          <li class="list-inline-item"><a href="https://github.com/kwbonds"><i class="ti-github"></i></a></li>
          
          <li class="list-inline-item"><a href="https://www.linkedin.com/in/kevin-bonds/"><i class="ti-linkedin"></i></a></li>
          
        </ul>
      </div>
      <div class="col-12 text-center mt-4">
        <span></span>
      </div>
    </div>
  </div>
</footer>




<script>
  var indexURL = "https://nervous-wright-ea05a8.netlify.app/index.json"
</script>


<!-- JS Plugins -->

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/jQuery/jquery.min.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/search/fuse.min.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/search/mark.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://nervous-wright-ea05a8.netlify.app/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-113458466-2', 'auto');
  ga('send', 'pageview');
</script></body>
</html>