<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Time Series Analysis of crude oil</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Data Science Portfilio">
  
  <meta name="author" content="Themefisher">
  <meta name="generator" content="Hugo 0.111.3">

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://nervous-wright-ea05a8.netlify.app/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://nervous-wright-ea05a8.netlify.app/plugins/themify-icons/themify-icons.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://nervous-wright-ea05a8.netlify.app/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://nervous-wright-ea05a8.netlify.app/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://nervous-wright-ea05a8.netlify.app/images/favicon.png " type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="fixed-top navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent">
      <a class="navbar-brand"href="https://nervous-wright-ea05a8.netlify.app/"><img class="img-fluid" src="/images/resume.png" alt="Kevin Bonds | Portfolio"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://nervous-wright-ea05a8.netlify.app/"> Home </a>
          </li>
          
            
            <li class="nav-item">
              <a class="nav-link" href="https://nervous-wright-ea05a8.netlify.app/resume">Resumé</a>
            </li>
            
          
            
            <li class="nav-item">
              <a class="nav-link" href="https://nervous-wright-ea05a8.netlify.app/contact">Contact</a>
            </li>
            
          
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/kwbonds?tab=repositories">Project Repos</a>
            </li>
            
          
        </ul>
        
        <!-- search -->
        <div class="search">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://nervous-wright-ea05a8.netlify.app//search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation --> <div class="py-5 d-none d-lg-block"></div> 

<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto block shadow mb-5">
        <h2>Time Series Analysis of crude oil</h2>
        <div class="mb-3"><span>by <a href="/author/kevin-bonds">Kevin bonds</a></span>,
          <span>at 30 November 2019</span>, category :
          
          <a href="/categories/time-series">Time series</a>
          
          <a href="/categories/arima">Arima</a>
          
        </div>
        
        <div class="content mb-5">
          <p>In order to illustrate data modeling techniques, and also experiment and learn, the following data analysis will be carried out and discussed. This blog will be an iterative process&ndash;meaning it may be incomplete to the viewer at any given time. Nonetheless, it will be public in it&rsquo;s unfinished state for the purpose of feedback and discussion. All code for this analysis can be found at: <a href="https://github.com/kwbonds/crudeoil_products">https://github.com/kwbonds/crudeoil_products</a>. Please Feel free to clone/fork. And please comment to me at <a href="mailto:kevin.w.bonds@gmail.com">kevin.w.bonds@gmail.com</a> with any helpful suggestions or feedback. I greatly incourage it.</p>
<p>I&rsquo;ll attempt to show some basic data ingestion, data preparation, visualization, and predictive modeling techniques in the process. I will use the <em>R</em> programming language with R Markdown for this document.</p>
<p>The first thing to do, is to load the needed libraries. I like to keep these collected at the top of any analysis, rather that scattered throughout, for future reference. A quick thank you to all the package developers for the following packages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tidyverse)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(readxl)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(lubridate)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(zoo)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(knitr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(yardstick)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(Metrics)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(astsa)
</span></span></code></pre></div><h1 id="collecting-data">Collecting data</h1>
<p>I&rsquo;ll start with some time series analysis using crude oil products. This data can be found as an xls file that can be downloaded from: <a href="https://www.eia.gov/dnav/pet/PET_PRI_SPT_S1_M.htm">https://www.eia.gov/dnav/pet/PET_PRI_SPT_S1_M.htm</a>.</p>
<p>I&rsquo;ll load the data and do some quick formatting. After taking a quick look, I&rsquo;ll begin modeling the data and making some predictions.</p>
<h2 id="loading-the-data">Loading the data</h2>
<p>Load the individual Excel tabs into tables and join them into one big table. Then add Month-over_Month and Year-over-Year for later. We&rsquo;ll do additional work to add other features in a bit.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Read rest of data directly from xlsx file into tables</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># raw_data_path &lt;- &#34;/Users/Kevin/Documents/FitBit/fitbit_interiew_project/DATA/raw_data_sheet.xlsx&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># sheets &lt;- raw_data_path %&gt;%</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        excel_sheets() %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        set_names()</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#crude_oil &lt;- read_excel(raw_data_path, sheet = sheets[2], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Date2&#34; = as.Date(as.yearmon(Date, &#34;%b-%Y&#34;), frac = 1),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#34;Month&#34; = month(Date2),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               &#34;Year&#34; = year(Date2))</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>crude_oil <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../crude_oil.rds&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>crude_oil <span style="color:#f92672">&lt;-</span> crude_oil <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mutate</span>(<span style="color:#e6db74">&#34;Date2&#34;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#a6e22e">as.yearmon</span>(Date, <span style="color:#e6db74">&#34;%b-%Y&#34;</span>), frac <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;Month&#34;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">month</span>(Date2),
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;Year&#34;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">year</span>(Date2),
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;MoM_crude_oil&#34;</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>                       (`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)` <span style="color:#f92672">-</span> 
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">lag</span>(`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`))<span style="color:#f92672">/</span> 
</span></span><span style="display:flex;"><span>                       <span style="color:#a6e22e">lag</span>(`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`),
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;YoY_crude_oil&#34;</span> <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>                       (`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)` <span style="color:#f92672">-</span> 
</span></span><span style="display:flex;"><span>                                <span style="color:#a6e22e">lag</span>(`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`, <span style="color:#ae81ff">12</span>))<span style="color:#f92672">/</span> 
</span></span><span style="display:flex;"><span>                       <span style="color:#a6e22e">lag</span>(`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`, <span style="color:#ae81ff">12</span>))
</span></span></code></pre></div><h2 id="adding-some-quick-stats">Adding some quick stats</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Calculate yearly stats</span>
</span></span><span style="display:flex;"><span>year_stats <span style="color:#f92672">&lt;-</span> crude_oil <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">group_by</span>(Year) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">summarize</span>( <span style="color:#e6db74">&#34;yr_mean_crude&#34;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`),
</span></span><span style="display:flex;"><span>                   <span style="color:#e6db74">&#34;yr_median_crude&#34;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">median</span>(`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Join to larger dataframe</span>
</span></span><span style="display:flex;"><span>crude_oil <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">left_join</span>(crude_oil, year_stats, by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Year&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kable</span>(crude_oil[12<span style="color:#f92672">:</span><span style="color:#ae81ff">17</span>,], caption<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Table with Yearly Stats&#34;</span>)
</span></span></code></pre></div><p>Table: (#tab:yearly_stats)Table with Yearly Stats</p>
<table>
<thead>
<tr>
<th style="text-align:left">Date</th>
<th style="text-align:right">Cushing, OK WTI Spot Price FOB (Dollars per Barrel)</th>
<th style="text-align:right">Europe Brent Spot Price FOB (Dollars per Barrel)</th>
<th style="text-align:left">Date2</th>
<th style="text-align:right">Month</th>
<th style="text-align:right">Year</th>
<th style="text-align:right">MoM_crude_oil</th>
<th style="text-align:right">YoY_crude_oil</th>
<th style="text-align:right">yr_mean_crude</th>
<th style="text-align:right">yr_median_crude</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1986-12-15</td>
<td style="text-align:right">16.11</td>
<td style="text-align:right">NA</td>
<td style="text-align:left">1986-12-31</td>
<td style="text-align:right">12</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">0.0584757</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15.000</td>
</tr>
<tr>
<td style="text-align:left">1987-01-15</td>
<td style="text-align:right">18.65</td>
<td style="text-align:right">NA</td>
<td style="text-align:left">1987-01-31</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1987</td>
<td style="text-align:right">0.1576660</td>
<td style="text-align:right">-0.1866550</td>
<td style="text-align:right">19.17167</td>
<td style="text-align:right">19.145</td>
</tr>
<tr>
<td style="text-align:left">1987-02-15</td>
<td style="text-align:right">17.75</td>
<td style="text-align:right">NA</td>
<td style="text-align:left">1987-02-28</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1987</td>
<td style="text-align:right">-0.0482574</td>
<td style="text-align:right">0.1481242</td>
<td style="text-align:right">19.17167</td>
<td style="text-align:right">19.145</td>
</tr>
<tr>
<td style="text-align:left">1987-03-15</td>
<td style="text-align:right">18.30</td>
<td style="text-align:right">NA</td>
<td style="text-align:left">1987-03-31</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1987</td>
<td style="text-align:right">0.0309859</td>
<td style="text-align:right">0.4512292</td>
<td style="text-align:right">19.17167</td>
<td style="text-align:right">19.145</td>
</tr>
<tr>
<td style="text-align:left">1987-04-15</td>
<td style="text-align:right">18.68</td>
<td style="text-align:right">NA</td>
<td style="text-align:left">1987-04-30</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1987</td>
<td style="text-align:right">0.0207650</td>
<td style="text-align:right">0.4548287</td>
<td style="text-align:right">19.17167</td>
<td style="text-align:right">19.145</td>
</tr>
<tr>
<td style="text-align:left">1987-05-15</td>
<td style="text-align:right">19.44</td>
<td style="text-align:right">18.58</td>
<td style="text-align:left">1987-05-31</td>
<td style="text-align:right">5</td>
<td style="text-align:right">1987</td>
<td style="text-align:right">0.0406852</td>
<td style="text-align:right">0.2639792</td>
<td style="text-align:right">19.17167</td>
<td style="text-align:right">19.145</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">#conv_gasoline &lt;- read_excel(raw_data_path, sheet = sheets[3], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Month&#34; = month(Date), &#34;Year&#34; = year(Date))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#RBOB_gasoline &lt;- read_excel(raw_data_path, sheet = sheets[4], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Month&#34; = month(Date), &#34;Year&#34; = year(Date))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#heating_oil &lt;- read_excel(raw_data_path, sheet = sheets[5], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Month&#34; = month(Date), &#34;Year&#34; = year(Date))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#uls_diesel &lt;- read_excel(raw_data_path, sheet = sheets[6], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;, &#34;numeric&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Month&#34; = month(Date), &#34;Year&#34; = year(Date))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#jet &lt;- read_excel(raw_data_path, sheet = sheets[7], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Month&#34; = month(Date), &#34;Year&#34; = year(Date))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#propane &lt;- read_excel(raw_data_path, sheet = sheets[8], skip = 2, col_types = c(&#34;date&#34;, &#34;numeric&#34;)) %&gt;% </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        mutate(&#34;Month&#34; = month(Date), &#34;Year&#34; = year(Date))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># kable(crude_oil[12:17,], caption= &#34;Table with MoM and YoY&#34;)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>conv_gasoline <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../conv_gasoline.rds&#34;</span>)
</span></span><span style="display:flex;"><span>RBOB_gasoline <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../RBOB_gasoline.rds&#34;</span>)
</span></span><span style="display:flex;"><span>heating_oil <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../heating_oil.rds&#34;</span>)
</span></span><span style="display:flex;"><span>uls_diesel <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../uls_diesel.rds&#34;</span>)
</span></span><span style="display:flex;"><span>jet <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../jet.rds&#34;</span>)
</span></span><span style="display:flex;"><span>propane <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">readRDS</span>(<span style="color:#e6db74">&#34;../../propane.rds&#34;</span>)
</span></span></code></pre></div><p>Since prices are taken at the end of the month, dates are converted to month end just for clarity.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Join conv_gasoline and heating_oil</span>
</span></span><span style="display:flex;"><span>energy_df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">left_join</span>(crude_oil, conv_gasoline[, <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>], by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(Year <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>, Month <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Month&#34;</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">left_join</span>(heating_oil[, <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>], by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(Year <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>, Month <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Month&#34;</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">left_join</span>(uls_diesel[<span style="color:#ae81ff">-1</span>], by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(Year <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>, Month <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Month&#34;</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">left_join</span>(RBOB_gasoline[<span style="color:#ae81ff">-1</span>], by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(Year <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>, Month <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Month&#34;</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">left_join</span>(jet[<span style="color:#ae81ff">-1</span>], by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(Year <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>, Month <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Month&#34;</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">left_join</span>(propane[<span style="color:#ae81ff">-1</span>], by <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(Year <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Year&#34;</span>, Month <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Month&#34;</span>))
</span></span><span style="display:flex;"><span>energy_df <span style="color:#f92672">&lt;-</span> energy_df <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">select</span>(Date <span style="color:#f92672">=</span> Date2, <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">5</span><span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(energy_df)))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kable</span>(<span style="color:#a6e22e">head</span>(energy_df))
</span></span></code></pre></div><table>
<thead>
<tr>
<th style="text-align:left">Date</th>
<th style="text-align:right">Month</th>
<th style="text-align:right">Year</th>
<th style="text-align:right">Cushing, OK WTI Spot Price FOB (Dollars per Barrel)</th>
<th style="text-align:right">Europe Brent Spot Price FOB (Dollars per Barrel)</th>
<th style="text-align:right">MoM_crude_oil</th>
<th style="text-align:right">YoY_crude_oil</th>
<th style="text-align:right">yr_mean_crude</th>
<th style="text-align:right">yr_median_crude</th>
<th style="text-align:right">New York Harbor Conventional Gasoline Regular Spot Price FOB (Dollars per Gallon)</th>
<th style="text-align:right">U.S. Gulf Coast Conventional Gasoline Regular Spot Price FOB (Dollars per Gallon)</th>
<th style="text-align:right">New York Harbor No. 2 Heating Oil Spot Price FOB (Dollars per Gallon)</th>
<th style="text-align:right">New York Harbor Ultra-Low Sulfur No 2 Diesel Spot Price (Dollars per Gallon)</th>
<th style="text-align:right">U.S. Gulf Coast Ultra-Low Sulfur No 2 Diesel Spot Price (Dollars per Gallon)</th>
<th style="text-align:right">Los Angeles, CA Ultra-Low Sulfur CARB Diesel Spot Price (Dollars per Gallon)</th>
<th style="text-align:right">Los Angeles Reformulated RBOB Regular Gasoline Spot Price (Dollars per Gallon)</th>
<th style="text-align:right">U.S. Gulf Coast Kerosene-Type Jet Fuel Spot Price FOB (Dollars per Gallon)</th>
<th style="text-align:right">Mont Belvieu, TX Propane Spot Price FOB (Dollars per Gallon)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1986-01-31</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">22.93</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
</tr>
<tr>
<td style="text-align:left">1986-02-28</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">15.46</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">-0.3257741</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
</tr>
<tr>
<td style="text-align:left">1986-03-31</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">12.61</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">-0.1843467</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
</tr>
<tr>
<td style="text-align:left">1986-04-30</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">12.84</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">0.0182395</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
</tr>
<tr>
<td style="text-align:left">1986-05-31</td>
<td style="text-align:right">5</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">15.38</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">0.1978193</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
</tr>
<tr>
<td style="text-align:left">1986-06-30</td>
<td style="text-align:right">6</td>
<td style="text-align:right">1986</td>
<td style="text-align:right">13.43</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">-0.1267880</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">15.03667</td>
<td style="text-align:right">15</td>
<td style="text-align:right">0.42</td>
<td style="text-align:right">0.409</td>
<td style="text-align:right">0.38</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
<td style="text-align:right">NA</td>
</tr>
</tbody>
</table>
<h1 id="modeling-crude-oil">Modeling crude oil</h1>
<p>Let&rsquo;s go ahead and try some ARIMA modeling. To create a time series model for crude oil price we should determine what sort of model may best fit. Looking at the plot of the data:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(energy_df, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> energy_df<span style="color:#f92672">$</span>Date, y <span style="color:#f92672">=</span> energy_df<span style="color:#f92672">$</span>`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_line</span>() <span style="color:#f92672">+</span> <span style="color:#a6e22e">ylab</span>(<span style="color:#e6db74">&#34;WTI Spot Price (Dollars per Barrel)&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">xlab</span>(<span style="color:#e6db74">&#34;Date&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">ggtitle</span>(<span style="color:#e6db74">&#34;Monthly average for West Texas Crude Oil&#34;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>## Warning: Use of `energy_df$Date` is discouraged.
## ℹ Use `Date` instead.
</code></pre><pre tabindex="0"><code>## Warning: Use of `` energy_df$`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)` `` is
## discouraged.
## ℹ Use `Cushing, OK WTI Spot Price FOB (Dollars per Barrel)` instead.
</code></pre><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-4-1.png" width="672" />
<p>It appears the data is not stabilized. There is a general trend and possibly some exponential behavior. Let&rsquo;s try standardizing the data by log-differencing to remove trend and growth.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>cop <span style="color:#f92672">&lt;-</span>  <span style="color:#a6e22e">ts</span>(energy_df<span style="color:#f92672">$</span>`Cushing, OK WTI Spot Price FOB (Dollars per Barrel)`, start<span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1986</span>,<span style="color:#ae81ff">1</span>), end <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2019</span>,<span style="color:#ae81ff">8</span>), frequency <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>crude_oil_returns <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">log</span>(cop)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(crude_oil_returns, type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;l&#34;</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-6-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(<span style="color:#a6e22e">diff</span>(crude_oil_returns), type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;l&#34;</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-7-1.png" width="672" />
<p>This is looking pretty stabilized. So this suggests that an integrated model is appropriate (d = 1). So let&rsquo;s check the ACF and PACF of the logged data to see if we can determine if an Auto-regressive model, Moving Average model or a combined model is best.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">acf2</span>(crude_oil_returns)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-8-1.png" width="672" />
<p>The above suggests a ARIMA(1,1,0) model because the acf is tailing off and the PACF cuts at lag 1 (suggesting AR = 1). I&rsquo;ll use the <em>sarima</em> package to create the model and to do some forecasting. <em>sarima</em> has some nice tools for this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ar_sim_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sarima</span>(crude_oil_returns, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, d <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, q <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/model_1-1.png" width="864" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ar_sim_x
</span></span></code></pre></div><pre tabindex="0"><code>## $fit
## 
## Call:
## arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
##     xreg = constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
##         REPORT = 1, reltol = tol))
## 
## Coefficients:
##          ar1  constant
##       0.2834    0.0017
## s.e.  0.0491    0.0058
## 
## sigma^2 estimated as 0.006958:  log likelihood = 429.16,  aic = -852.32
## 
## $degrees_of_freedom
## [1] 401
## 
## $ttable
##          Estimate     SE t.value p.value
## ar1        0.2834 0.0491  5.7729  0.0000
## constant   0.0017 0.0058  0.2958  0.7676
## 
## $ICs
##       AIC      AICc       BIC 
## -2.114934 -2.114860 -2.085165
</code></pre><p>We can see from above, the AR1 parameter is significant as the p.value is zero. Also, we note to AIC and BIC for comparison with subsequent models. We want these to be as small as possible.</p>
<p>Let&rsquo;s try adding a parameter and see if that improves things? We are looking for the Akaike Information Criterion (AIC) and the Bayesian Information Criterion (BIC) to judge the strength of the model. The lower these values the more information is captured.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ar_sim_x_2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sarima</span>(crude_oil_returns, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, d <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, q <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/model_2-1.png" width="864" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ar_sim_x_2
</span></span></code></pre></div><pre tabindex="0"><code>## $fit
## 
## Call:
## arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
##     xreg = constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
##         REPORT = 1, reltol = tol))
## 
## Coefficients:
##          ar1      ar2  constant
##       0.2927  -0.0359    0.0018
## s.e.  0.0508   0.0511    0.0056
## 
## sigma^2 estimated as 0.006949:  log likelihood = 429.41,  aic = -850.81
## 
## $degrees_of_freedom
## [1] 400
## 
## $ttable
##          Estimate     SE t.value p.value
## ar1        0.2927 0.0508  5.7616  0.0000
## ar2       -0.0359 0.0511 -0.7014  0.4835
## constant   0.0018 0.0056  0.3222  0.7474
## 
## $ICs
##       AIC      AICc       BIC 
## -2.111192 -2.111043 -2.071500
</code></pre><p>That does not. We can see that the added parameter is not statistically significant and the BIC and AIC both go up. After a few more less probable attempts we can be certain that the first model is looking best.</p>
<p>Now let&rsquo;s see if adding seasonality to the model will improve it. Looking at the ACF/PCF for the differenced data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">acf2</span>(<span style="color:#a6e22e">diff</span>(<span style="color:#a6e22e">diff</span>(crude_oil_returns), <span style="color:#ae81ff">48</span>))
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/seasonal_acf-1.png" width="672" />
<p>From the ACF/PACF it seems that the ACF may trail off at each log (12 months) and the PCF cuts off. But the signal is small if any. We can try to add a seasonal AR and see what happens.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ar_sim_x_3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sarima</span>(crude_oil_returns, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, d <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, q <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, P <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, D <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, Q <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, S <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/model_3-1.png" width="864" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ar_sim_x_3
</span></span></code></pre></div><pre tabindex="0"><code>## $fit
## 
## Call:
## arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
##     xreg = constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
##         REPORT = 1, reltol = tol))
## 
## Coefficients:
##          ar1    sar1  constant
##       0.2832  0.0241    0.0017
## s.e.  0.0491  0.0535    0.0059
## 
## sigma^2 estimated as 0.006954:  log likelihood = 429.26,  aic = -850.52
## 
## $degrees_of_freedom
## [1] 400
## 
## $ttable
##          Estimate     SE t.value p.value
## ar1        0.2832 0.0491  5.7699  0.0000
## sar1       0.0241 0.0535  0.4494  0.6534
## constant   0.0017 0.0059  0.2851  0.7757
## 
## $ICs
##       AIC      AICc       BIC 
## -2.110472 -2.110323 -2.070781
</code></pre><p>This model is not better. The seasonal AR is not significant and the AIC and BIC have increased. Seems adding a seasonal component doesn&rsquo;t improve the model.</p>
<p>Now that we are satisfied with the non-seasonal ARIMA(1,1,0), let&rsquo;s forecast 6 months ahead. We&rsquo;ll use the sarima package</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>oil_for <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sarima.for</span>(cop, n.ahead <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-12-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>oil_for<span style="color:#f92672">$</span>pred
</span></span></code></pre></div><pre tabindex="0"><code>##           Jan      Feb Mar Apr May Jun Jul Aug      Sep      Oct      Nov
## 2019                                           53.90442 53.60729 53.53667
## 2020 53.59547 53.65225                                                   
##           Dec
## 2019 53.55037
## 2020
</code></pre><h1 id="gas-prices">Gas Prices</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gas_price <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ts</span>(energy_df<span style="color:#f92672">$</span>`New York Harbor Conventional Gasoline Regular Spot Price FOB (Dollars per Gallon)`, start<span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1986</span>,<span style="color:#ae81ff">1</span>), end <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2019</span>,<span style="color:#ae81ff">8</span>), frequency <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(<span style="color:#a6e22e">diff</span>(gas_price), type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;l&#34;</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-14-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gas_returns <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">log</span>(gas_price)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(gas_returns, type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;l&#34;</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-15-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(<span style="color:#a6e22e">diff</span>(gas_returns), type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;l&#34;</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-16-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">acf2</span>(gas_returns)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/acf2_gas_prices-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gas_mdl <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sarima</span>(gas_returns, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, d <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, q <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/gas_mdl_1-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gas_mdl
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gas_mdl <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sarima</span>(gas_returns, p <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, d <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, q <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/gas_mdl_2-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gas_mdl
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sarima.for</span>(gas_price, <span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>, n.ahead <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>)
</span></span></code></pre></div><img src="/post/2019-12-10-time-series-analysis-of-crude-oil_files/figure-html/unnamed-chunk-17-1.png" width="672" />
<pre tabindex="0"><code>## $pred
##           Jan      Feb Mar Apr May Jun Jul Aug      Sep      Oct      Nov
## 2019                                           1.614915 1.637612 1.656848
## 2020 1.687288 1.699412                                                   
##           Dec
## 2019 1.673238
## 2020         
## 
## $se
##            Jan       Feb Mar Apr May Jun Jul Aug       Sep       Oct       Nov
## 2019                                             0.1279105 0.2074902 0.2557773
## 2020 0.3180102 0.3403182                                                      
##            Dec
## 2019 0.2907294
## 2020
</code></pre>
        </div>
      </div>
      <div class="col-lg-8 mx-auto block shadow">
        
        
      </div>
    </div>
  </div>
</section>


<footer class="py-4 bg-light border-top">
  <div class="container">
    <div class="row justify-content-between align-items-center">
      <div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0">
        <a href="https://nervous-wright-ea05a8.netlify.app/"><img src="/images/resume.png" class="img-fluid"
            alt="Kevin Bonds | Portfolio"></a>
      </div>
      <div class="col-lg-4 text-center mb-4 mb-lg-0">
        <ul class="list-inline mb-0">
          
          <li class="list-inline-item"><a class="text-dark d-block p-2" href="https://nervous-wright-ea05a8.netlify.app/resume">Resumé</a>
          </li>
          
          <li class="list-inline-item"><a class="text-dark d-block p-2" href="https://nervous-wright-ea05a8.netlify.app/contact">Contact</a>
          </li>
          
          <li class="list-inline-item"><a class="text-dark d-block p-2" href="https://github.com/kwbonds?tab=repositories">Project Repos</a>
          </li>
          
        </ul>
      </div>
      <div class="col-lg-4 text-lg-right text-center mb-4 mb-lg-0">
        <ul class="list-inline social-icon mb-0">
          
          <li class="list-inline-item"><a href="https://join.skype.com/invite/u45PzQhKsLp5"><i class="ti-skype"></i></a></li>
          
          <li class="list-inline-item"><a href="https://twitter.com/KevinWBonds"><i class="ti-twitter-alt"></i></a></li>
          
          <li class="list-inline-item"><a href="https://github.com/kwbonds"><i class="ti-github"></i></a></li>
          
          <li class="list-inline-item"><a href="https://www.linkedin.com/in/kevin-bonds/"><i class="ti-linkedin"></i></a></li>
          
        </ul>
      </div>
      <div class="col-12 text-center mt-4">
        <span></span>
      </div>
    </div>
  </div>
</footer>




<script>
  var indexURL = "https://nervous-wright-ea05a8.netlify.app/index.json"
</script>


<!-- JS Plugins -->

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/jQuery/jquery.min.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/search/fuse.min.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/search/mark.js"></script>

<script src="https://nervous-wright-ea05a8.netlify.app/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://nervous-wright-ea05a8.netlify.app/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-113458466-2', 'auto');
  ga('send', 'pageview');
</script></body>
</html>